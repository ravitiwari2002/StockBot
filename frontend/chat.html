<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Chat</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="container" id="root"></div>
<script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
<script>
const e = React.createElement;
function ChatApp() {
    const [messages, setMessages] = React.useState([]);
    const [input, setInput] = React.useState('');
    const send = async () => {
        if (!input) return;
        const resp = await fetch('/api/chat', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({message: input})
        });
        const data = await resp.json();
        setMessages([...messages, {role:'user',content:input}, {role:'bot',content:data.response}]);
        setInput('');
    };
    return e('div', null,
        e('h2', {className:'title'}, 'Stock Chatbot'),
        messages.map((m,i)=>e('div',{key:i}, `${m.role}: ${m.content}`)),
        e('textarea',{value:input,onChange:e=>setInput(e.target.value),rows:4,cols:50}),
        e('br'),
        e('button',{onClick:send},'Send')
    );
}
ReactDOM.render(e(ChatApp), document.getElementById('root'));
</script>
</body>
</html>
